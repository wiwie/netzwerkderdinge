<h1><%= @ding.ding_typ.name %>
	<% if @ding.ding_typ != DingTyp.find_by_name('Ding') or @ding.has_translation(:name, params[:locale]) %>
		'<%= best_in_place @ding, :name, :as => :input %>'
	<% else %>
		&lt;???&gt;
	<% end %>
</h1>
<% if @ding.ding_typ == DingTyp.find_by_name('Ding') and not @ding.has_translation(:name, params[:locale]) %>
	<%= I18n.t("dings.show.für_den_namen_dieses_dings_wurde_noch_keine_Übersetzung_für_deine_sprache_hinterlegt_bitte_nutze_das_textfeld_um_deine_Übersetzung_hinzuzufügen_es_folgen_ein_paar_Übersetzungen_in_anderen_sprachen") %>
	<ul>
		<% if @ding.name_de %><li>Deutsch: <%= @ding.name_de %></li><% end %>
		<% if @ding.name_en %><li>English: <%= @ding.name_en %></li><% end %>
		<% if @ding.name_dk %><li>Dansk: <%= @ding.name_dk %></li><% end %>
	</ul>
	<%= form_for @ding, :url => ding_add_translation_path(@ding), :method => :post do |f| %>
	  <%= hidden_field_tag :locale, params[:locale] %>
	  <%= f.label I18n.t("dings.show.ding") %><br>
	  <%= f.text_field :name, :value => '' %>
	  <%= f.submit I18n.t("dings.show.value") => 'Add Translation' %>
	<% end %>
<% end %>

<% if current_user.favorits.where(:ding_id => @ding.id).count == 0 %>
<%= glyph('star-empty') %> <%= link_to (url = '#'), :onclick => 'add_favorit_for_curr_user(' + current_user.id.to_s + ', ' + @ding.id.to_s + ');' do %>
			            zu Favoriten <%= I18n.t("dings.show.hinzufügen") %>
			          <% end %>
<% else %>
<%= glyph('star') %> <%= link_to (url = '#'), :onclick => 'remove_favorit_for_curr_user(' + current_user.id.to_s + ', ' + @ding.id.to_s + ');' do %>
			            von Favoriten <%= I18n.t("dings.show.löschen") %>
			          <% end %>
<% end %>

<% if @ding.ding_typ == DingTyp.find_by_name('URL') %>
	<br>
	<%= glyph("new-window") %>
	<%= link_to @ding.name, target: "_blank" do %>
		Open URL
	<% end %>
<% elsif  @ding.ding_typ == DingTyp.find_by_name('Image') %>
	<br>
	<%= link_to @ding.name, {:class => 'fancybox'} do %>
		<img src="<%= @ding.name %>" alt="<%= @ding.name %>" style="height:240px;">
	<% end %>
<% elsif  @ding.ding_typ == DingTyp.find_by_name('Video') %>
	<br>
	<div class="embed-responsive embed-responsive-16by9">
	  <iframe class="embed-responsive-item" src="<%= @ding.name %>" allowfullscreen></iframe>
	</div>
<% end %>

<h2>Typ</h2>
<%= best_in_place @ding, :ding_typ_id, :as => :select, :collection => Hash[DingTyp.all.map {|x| [x.id, x.name]}] %>

<h2><%= I18n.t("dings.show.beschreibung") %></h2>
<% if not @ding.description.nil? %>
<%= @ding.description %>
<% else %>
<%= I18n.t("dings.show.bislang_keine_beschreibung_vorhanden") %>
<% end %>

<h2><%= I18n.t("dings.show.dieses_ding_wurde_mit_den_folgenden_dingen_assoziiert") %></h2>
	<ul class="nav nav-list">
		<% @ding.assoziierte_dinge.each do |anderes_ding, ass| %>
			<% ding = Ding.find(anderes_ding) %>
			<% if ass.user_assoziations.count > 0 %>
			<li>
			    <ul class="list-inline">
	        		<li><span style="vertical-align:middle"><%= glyph(:paperclip) %></span></li>
	        		<li><%= link_to ding.name, ding %></li>
			        <li>(<%= link_to ass do %><span style="vertical-align:middle"><%= glyph(:link) %></span><% end %>)</li>
			        <li><%= badge(ass.user_assoziations.count.to_s + " mal", :warning) %></li>
			        <% if UserAssoziation.where(:user_id => current_user.id).where(:assoziation_id => ass.id).count == 0 %>
			        <li>
			          <%= link_to (url = '#'), :onclick => 'create_asso_for_curr_user(' + ass.id.to_s + ');' do %>
			            <%= glyph(:plus) %>
			          <% end %>
			        </li>
			        <% end %>
			    </ul>
			</li>
			<% end %>
		<% end %>
	</ul>

<h2><%= I18n.t("dings.show.womit_assoziierst_du_dieses_ding") %></h2>
<%= form_for @assoziation, :url => new_assoziation_path(), :method => :get do |f| %>
  <%= f.label I18n.t("dings.show.ding") %><br>
  <%= hidden_field_tag :ding_eins_id, @ding.id %>
  <%= f.autocomplete_field :ding_zwei_id, autocomplete_ding_name_dings_path, :id_element => '#selected_ding_zwei_id' %>
  <%= hidden_field_tag :selected_ding_zwei_id %>
  <%= f.submit %>
<% end %>
